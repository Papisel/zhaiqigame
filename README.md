# 「像素突击」战旗游戏

## 框架

- Python语言，基于Pyside6图形库开发
- 使用套接字进行网络通讯
- 远程服务器保存多人用户数据
- JSON格式保存数据

## 机制

- 回合制，行动权会转换
- 棋类，单位不能堆叠
- 红蓝对抗，仅有两方对战

## 实现

- 单位动画
- 地图
- 单位行动
- AI
- 网络

---

### 单位动画

- 单位行动时，计时器播放一帧帧贴图，实现动画效果
- 单位的行动转换为一连串的动作，压入队列
- 单位的每次动作结束后，执行下一个动作
- 单位所有动作结束后，视为单位行动结束

### 地图

- 正方型网格填充地形图片作为地图
- 地图将用一个文件存放包括名称，大小，地形，单位
- 地图视窗支持右键拖拽，以展示大型地图
- 地图编辑器地图保存至本地

### 单位行动

- 记录选中的单位，如果存在选中的单位则行动
- 选中单位时，地图视窗会生成一层蒙版，告知玩家单位的有效行动
- 当玩家的操作在蒙版内时，单位将行动

### AI
- ai会遍历其该阵营所有的单位
- 如果能移动则会移动到其敌方单位附近
- ai总会尝试发起攻击
- 当ai的一个单位可能会被其敌方的另一个单位消灭时，将远离

### 网络

- 服务器保留玩家登陆时的套接字
- 客户端联机时保留另一位玩家的套接字索引
- 服务器将玩家的操作依套接字发送至对应玩家的客户端上
- 服务器接受玩家使用地编时发送的地图并保存
- 玩家使用服务器的地图开始对战
